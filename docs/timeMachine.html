<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style/popup.css" />
    <link rel="stylesheet" href="../style/style.css" />
    <title>Document</title>
    <style></style>
  </head>
  <body>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <div
      id="background"
      style="background-image: url('../source/스위치 2.jpg')"
    >
      <div onclick="openBag()" class="bagIcon"></div>
      <div class="bagBackground invisible">
        <div class="inBag">item</div>
      </div>
      <img
        src="../source/꼬오오옻.png"
        style="position: absolute; top: 440px; left: 900px; width: 80px"
      />
      <img
        id="morning"
        class="timeBackground invisible"
        src="../source/벨브 all.jpg"
      />
      <img
        id="night"
        class="timeBackground invisible"
        src="../source/밤이됨.jpg"
      />
      <img
        class="arrow"
        src="../source/arrow.png"
        style="width: 140px; top: 350px; left: 30px; transform: rotateZ(-90deg)"
        onclick="goBack()"
      />
      <button
        onclick="timeTravel()"
        style="
          z-index: 11;
          position: absolute;
          left: 600px;
          top: 600px;
          padding: 10px;
        "
      >
        타임머신 실행
      </button>
    </div>

    <script src="../js/bag.js"></script>
    <script>
      addEventListener("load", () => {
        if (window.localStorage.getItem("clock") === "false") {
          window.localStorage.setItem("clock", "true");
          let timerInterval;
          Swal.fire({
            text: "시계를 획득했습니다.",
            timer: 1700,
            padding: 0,
            width: 300,
            backdrop: false,
            position: "bottom-end",
            timerProgressBar: true,
            didOpen: () => {
              Swal.showLoading();
            },
            willClose: () => {
              clearInterval(timerInterval);
            },
          }).then(result => {
            /* Read more about handling dismissals below */
          });
        }
      });

      const goBack = () => {
        window.location.assign("belb.html");
      };

      const timeTravel = () => {
        console.log("boom");
        let speed = 10;
        let day = 0;
        let count = 0;
        const dayChange = () => {
          console.log("e");
          if (day === 1) {
            day = 0;
            // 밤에서 낮으로
            $("#night").addClass("invisible");
            $("#morning").removeClass("invisible");
            if (1) {
            }
          } else {
            day = 1;
            $("#morning").addClass("invisible");
            $("#night").removeClass("invisible");
          }
          // 시간 바꾸기
          if (count < 99) {
            if (count < 50) speed = speed + 1;
            else speed = speed - 1;
            count += 1;
            setTimeout(() => {
              dayChange();
            }, 70 - 0.5 * speed);
          }
          if (count === 99) {
            $("#morning").addClass("fadeOut");
            setTimeout(() => {
              if (window.localStorage.getItem("time") === "0")
                window.localStorage.setItem("time", "1");
              // 1이 미래
              else window.localStorage.setItem("time", "0");
              window.localStorage.setItem("timeMachineWork", "true");
              $("#morning").addClass("invisible");
              Swal.fire("시간이 바뀌었습니다");
            }, 3000);
          }
        };
        dayChange();
      };
      // addEventListener("load", () => {});
    </script>
  </body>
</html>
